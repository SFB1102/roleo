<!DOCTYPE html>
<html lang="en">
  <head>
    {% load staticfiles %}
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="">

    <title>Web-based semantic visualization tool</title>

    <!-- Bootstrap core CSS -->
	  <link href="{% static 'view2D/bootstrap/css/bootstrap.min.css' %}" rel="stylesheet">


    <!-- Custom styles for this template -->
    <link href="{% static 'view2D/css/index.css' %}" rel="stylesheet">

    <!-- TODO  a local version of jquery.min.js -->
  	<script src="{% static 'view2D/js/jquery.min.js' %}"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
  	<script src="{% static 'view2D/bootstrap/js/bootstrap.min.js' %}"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

    <script src="{% static 'view2D/js/view2D.js' %}"></script>
    <script src="{% static 'view2D/js/index.js' %}"></script>
  	<script src="{% static 'view2D/js/inputTextFilter.js' %}"></script>
	  <!-- <script src="{% static 'view2D/js/xmlHttpRequest.js' %}"></script> -->
    <script type="text/javascript">
	// window.onload can only be defined at here
       	window.onload = function() {
			loadView2D(false); // view2D.js
			loadInputTextFilter(); // inputTextFilter.js
			// load error_code.json into frontend
			$('#input_noun').val("apple");
			$('#input_verb').val("eat");
			$.ajax({
				url:      'errorCodeJSON/',
				type:     'GET',
				data:     null,
				async:    true,
				success:  function(response){
				  loadErrCodeJSON(response);
				}
            });
		}
	
	
        function buttonClicked(){
			setIsInProcessing(true);
          $.ajax({
            url:      'query/',
            type:     'POST',
            data:     $('#myDiv').serialize(),
            async:    true,
            success:  function(response){
              updateQuerySet(createNodesFromJSON(response));
			  setIsInProcessing(false);
            }
          });
        }
    </script>

  </head>

  <body>

    <nav class="navbar navbar-inverse navbar-fixed-top no-margin-bottom" id="navigation_bar">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="">Web-based semantic visualization tool</a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            <li id = "query_page" class="active"><a href="">Query</a></li>
            <li id = "help_page" ><a href="help">Help</a></li>
            <li id = "contact_page"><a href="contact">Contact</a></li>
            <li id = "impressum_page" ><a href="impressum">Impressum</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>
    <div class="container-fluid">
      <div class="row parent_row">
      <div class="col-md-2 col-sm-3 col-xs-12 col-ld-3 left_column content_columns" id="left_menu_bar">
      <div id="query_form">
        <h1>WSVT</h1>

          <form id="myDiv">
            <div class="input_element">
              <span class="left_align">Noun:</span>
              <input id="input_noun" type="text" name="noun" class="form-control"  placeholder="e.g. apple" data-toggle="tooltip_noun" title="Enter a noun here!">
              <div class="input_element radio">
                <label class="left_align">
                  <input type="radio" name="group1" value="noun">Noun selects verb
                </label>
              </div>
              <!-- label show related error message for the input -->
              <label id="label_msg_noun"></label>
            </div><br>
            <div class="input_element" data-toggle="tooltip" title="Specify the role of the noun!">
              <span class="left_align">Role:</span><br>
              <select id="select_role" class="form-control" name='role'>
                {% if role_list %}
                  {% for r in role_list %}
                      <option value="{{r.name}}">{{r.name}}</option>
                  {% endfor %}
                {% else %}
                  <p>No roles are available.</p>
                {% endif %}
              </select>
            </div><br>
            <div class="input_element">
              <span class="left_align">Verb:</span>
              <input id="input_verb" type="text" name="verb" class="form-control"  placeholder="e.g. eat" data-toggle="tooltip" title="Enter a verb!">
              <div class="input_element radio">
                <label class="left_align">
                  <input type="radio" name="group1" value="verb" checked="checked">Verb selects noun
                </label>
                </div>
                <!-- label show related error message for the input -->
              <label id="label_msg_verb"></label>
            </div><br>
              <button id="submitBtn" type='button' class="btn btn-primary" onclick=javascript:buttonClicked()>Submit Query</button>
              <input type="hidden" name="csrfmiddlewaretoken" value="{{ csrf_token }}"><br><br><br>

            <div class="input_element">
                Top N results:
                <div data-toggle="tooltip_button" title="How many result words do you want?">
                <select class="form-control" name='top_results'>
                  <option value="20">20</option>
                  <option value="50">50</option>
                  <option value="100">100</option>
                </select>
              </div>
            </div><br>

            <div class="input_element">
                Model:
                <div data-toggle="tooltip_button" title="Choose another model!">
                <select class="form-control" name='model'>
                  <option value="model1">Model 1</option>
                  <option value="model2">Model 2</option>
                  <option value="model3">Model 3</option>
                </select>
              </div>
            </div><br>
                <button id="changeModelBtn" type='button' class="btn btn-primary" onclick=javascript:changeModel()>Change Model</button>
            </div>
          </form><br>
          </div>
      <div class="col-md-7 col-sm-6 col-xs-12 col-ld-6" id="canvas_column">
      <div class="visualization" id="visualization_result">

        <canvas id="myCanvas" class="canvas_style">
    			This text is displayed if your browser does not support HTML5 Canvas.
    		</canvas>
        </div>
      </div>
      <div class="col-md-3 col-sm-3 col-xs-12 col-ld-3" id="right_menu_column">
        <div class="right_menu_column">
          Query Information:<br><br>
          Noun:<br>
          Verb:<br>
          Model:<br><br>

        <!-- Add a dropdown menu let user specify image format -->
        <button id="start_presentation_mode" type='button' class="btn btn-primary" onclick=javascript:start_presentation_mode();javascript:reloadView()>Start Presentation Mode</button>
        <button id="end_presentation_mode" type='button' class="btn btn-primary end_presentation_mode" onclick=javascript:end_presentation_mode();javascript:reloadView()>End Presentation Mode</button>
        <br><br>
            <button id="downloadBtn" class="btn btn-primary">Download Result As Image</button>
        <a href="#" id="downloadA" download></a><br><br>
        <button id="resetViewBtn" type='button' class="btn btn-primary" onclick=javascript:resetView()>Reset View</button>
    </div></div>
    </div>
    </div><!-- /.container -->

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

    <script>
    $('[data-toggle="tooltip"]').tooltip({'placement': 'right'});
    $('[data-toggle="tooltip_noun"]').tooltip({'placement': 'right'});
    $('[data-toggle="tooltip_button"]').tooltip({'placement': 'right'});
    </script>

  </body>
</html>
